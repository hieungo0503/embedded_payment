# Simple Caddyfile - No Port Conflicts
{
    auto_https off
}

# HTTPS on custom port 8443
3diot.vn:8443 {
    encode gzip
    
    handle_path /embedded-course* {
        reverse_proxy localhost:3000
    }
    
    handle /embedded-course/paypal-payment-success {
        reverse_proxy localhost:3000
    }
    
    handle /embedded-course/paypal-webhook {
        reverse_proxy localhost:3000
    }
    
    handle / {
        respond "Welcome to 3DIoT! Visit /embedded-course for our IoT course." 200
    }
}

# HTTP redirect on port 8080
3diot.vn:8080 {
    redir https://3diot.vn:8443{uri} permanent
} 